const input=document.querySelector(".js-input "),btn=document.querySelector(".js-button-search"),favourites=document.querySelector(".js-favouritesList"),results=document.querySelector(".js-resultsList"),reset=document.querySelector(".js-reset");let actors=[],favouriteCharacters=[];function renderCharacters(){let e="",t="";for(const r of actors){t=-1===favouriteCharacters.findIndex(e=>e.char_id===parseInt(r.char_id))?"":"selected",e+=`<li>\n      <article class ="${t} article js-articles" id= "${r.char_id}">\n      <img class="img" src=${r.img}>\n      <h3 class = "name"> ${r.name}</h3>\n      <p class = "status">${r.status}</p>\n      </article>\n      </li>`}results.innerHTML=e,addCharactersEvent()}function handleClickSearch(e){e.preventDefault();const t=input.value.toLowerCase();fetch("https://breakingbadapi.com/api/characters?name="+t).then(e=>e.json()).then(e=>{actors=e,renderCharacters(actors)})}function addCharactersEvent(){const e=document.querySelectorAll(".js-articles");for(const r of e)r.addEventListener("click",t);function t(e){e.currentTarget.classList.toggle("selected");const t=actors.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favouriteCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?favouriteCharacters.push(t):favouriteCharacters.splice(r,1),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters)),renderFavourites()}}function renderFavourites(){let e="";for(const t of favouriteCharacters)e+=`<li>\n        <article class ="article-fav js-articles" >\n        <i class="js-bDelete fa-solid fa-xmark card__icon" id= "${t.char_id}"> </i>\n        <img class="img-fav" src=${t.img}>\n        <h3 class = "name-fav"> ${t.name}</h3>\n        <p class = "status-fav">${t.status}</p>\n        </article>\n        </li>`;favourites.innerHTML=e,addIconsEvent()}function getFavFromLocal(){const e=JSON.parse(localStorage.getItem("favourites"));null!==e&&(favouriteCharacters=e,renderFavourites())}function addIconsEvent(){const e=document.querySelectorAll(".js-bDelete");for(const t of e)t.addEventListener("click",handleIcons)}function handleIcons(e){const t=favouriteCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));console.log(favouriteCharacters),favouriteCharacters.splice(t,1),console.log("second",favouriteCharacters),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters)),renderFavourites(),renderCharacters()}function handleReset(){favouriteCharacters=[],renderFavourites(),renderCharacters(),localStorage.removeItem("favourites")}fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{actors=e,getFavFromLocal(),renderFavourites(),renderCharacters()}),btn.addEventListener("click",handleClickSearch),reset.addEventListener("click",handleReset);